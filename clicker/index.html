
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Clicker</title>
  <link rel="manifest" href="manifest.json">
  <script>
    function saveClick() {
      const today = new Date().toISOString().split('T')[0];
      let clicks = JSON.parse(localStorage.getItem('clicks') || '{}');
      clicks[today] = (clicks[today] || 0) + 1;
      localStorage.setItem('clicks', JSON.stringify(clicks));
      if (Notification.permission === 'granted') {
        new Notification(`Сегодня: ${clicks[today]} ${decline(clicks[today])}`);
      }
    }

    function decline(n) {
      const mod10 = n % 10;
      const mod100 = n % 100;
      if (mod10 === 1 && mod100 !== 11) return 'клик';
      if (mod10 >= 2 && mod10 <= 4 && (mod100 < 10 || mod100 >= 20)) return 'клика';
      return 'кликов';
    }

    window.onload = async () => {
      if (Notification.permission !== 'granted') {
        await Notification.requestPermission();
      }
      saveClick();
    };
 if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('service-worker.js')
      .then(registration => {
        console.log('Service Worker зарегистрирован: ', registration);
      })
      .catch(error => {
        console.log('Ошибка регистрации Service Worker: ', error);
      });
  });
} </script>
</head>
<body>
  <h1>Клик засчитан!</h1>
</body>
</html>
